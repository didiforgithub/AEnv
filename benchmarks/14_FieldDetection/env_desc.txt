**Background**

The Electromagnetic Field Anomaly Mapping Environment simulates a critical laboratory scenario where agents must locate hidden metallic vulnerabilities that distort electromagnetic fields. Set within a controlled 15×15 laboratory floor, the environment represents a realistic scientific investigation where electromagnetic anomalies indicate the presence of concealed metal objects. The laboratory contains strategically placed insulating walls that create complex field propagation patterns, mimicking real-world scenarios where electromagnetic shielding affects field measurements. Each episode presents a unique configuration with different wall layouts and anomaly locations, requiring agents to develop robust detection strategies rather than memorizing specific patterns.

**Objective**

The agent's primary mission is to successfully identify and mark the location of a single hidden Vulnerability Node within a strict 30-step time limit. Success requires the agent to navigate to any tile positioned within Manhattan distance 1 of the hidden node and execute a Mark action. This means the agent can achieve success by standing directly on the node or on any of the four orthogonally adjacent tiles. The task demands efficient exploration and pattern recognition, as agents must interpret electromagnetic field readings to triangulate the anomaly source while managing limited time resources.

**State Setup**

Each episode begins with a procedurally generated 15×15 grid laboratory. The environment initialization process first places insulating walls across approximately 20% of the tiles, ensuring all free spaces remain connected as a single traversable region. Next, one Vulnerability Node is randomly positioned among the free tiles, establishing the electromagnetic source point. The agent spawns at a random free location with a random initial facing direction. The electromagnetic field values are then calculated deterministically across all tiles using the decay formula, creating a stable field pattern that persists throughout the entire episode. The agent begins with 30 available steps and receives its first observation of the local electromagnetic environment.

**Actions**

The agent operates with seven distinct actions that enable both navigation and investigation. Movement actions include MoveNorth, MoveSouth, MoveEast, and MoveWest, allowing the agent to traverse the laboratory grid. Rotational actions RotateLeft and RotateRight enable the agent to change facing direction without consuming movement, providing tactical positioning options. The critical Mark action serves as the declaration mechanism for anomaly detection. All movement actions that would result in collisions with walls or grid boundaries are treated as illegal moves, causing the agent to remain in its current position while still consuming one time step. This collision system prevents exploitation while maintaining realistic movement constraints.

**State Transition Rule**

Environmental state changes follow deterministic patterns based on agent actions and time progression. Valid movement actions update the agent's position coordinates and automatically adjust the facing direction to match the movement direction. Rotational actions modify only the facing direction while preserving the current position. The Mark action triggers immediate episode termination with success evaluation based on proximity to the Vulnerability Node. Each action decrements the remaining step counter by exactly one. Illegal movement attempts result in position maintenance with step consumption, creating natural penalty mechanisms for inefficient exploration. The electromagnetic field readings, wall positions, and node location remain completely static throughout each episode, ensuring consistent environmental physics.

**Rewards**

The environment implements a binary reward system with exactly two possible outcomes. The agent receives a reward of +1 exclusively when executing a Mark action while positioned within Manhattan distance 1 of the Vulnerability Node, encompassing both direct occupation of the node tile and placement on any of the four orthogonally adjacent tiles. All other scenarios, including incorrect Mark actions, timeout conditions, and intermediate exploration steps, yield a reward of 0. This sparse reward structure eliminates reward shaping and forces agents to develop intrinsic exploration strategies. The binary nature ensures clear success criteria while avoiding complex reward engineering that might introduce unintended behavioral biases.

**Observation**

Agent observations provide carefully balanced partial information designed to support learning while maintaining appropriate challenge levels. The primary observation component consists of a 3×3 electromagnetic field strength grid centered on the agent's current position, displaying integer values from 0 to 3 representing field intensity. This local window provides actionable information for gradient-following strategies while preventing trivial global optimization. The agent's current facing direction (North, South, East, West) enables spatial reasoning and navigation planning. The remaining step count creates temporal awareness and urgency management. Crucially, the environment withholds absolute position coordinates, global field maps, and direct node location information, forcing agents to rely on relative navigation and field interpretation skills. The electromagnetic readings serve as the primary information source, with higher values consistently indicating proximity to the metal anomaly, providing learnable signals that support strategic decision-making.

**Termination**

Episodes conclude under two specific conditions that create clear temporal boundaries. Immediate termination occurs when the agent executes a Mark action, regardless of correctness, preventing multiple marking attempts and requiring confident decision-making. Automatic termination triggers when the 30-step limit expires, creating consistent episode durations and resource management pressure. Both termination modes preserve the binary reward evaluation, with success determined solely by the spatial relationship between the agent's marking location and the true Vulnerability Node position at the moment of marking.

**Special Features**

The environment incorporates several distinctive mechanisms that enhance realism and learning complexity. The deterministic electromagnetic field calculation uses the formula FieldLevel(tile) = max(0, 3 - ManhattanDistance(tile, node)) with Faraday shielding effects where insulating walls completely block electromagnetic propagation, reducing field levels to 0 in shadowed areas. This physics-inspired model creates learnable patterns while introducing strategic complexity through wall interactions. The wall generation algorithm ensures connectivity of all free spaces, preventing unsolvable configurations while maintaining exploration challenges. Episode stationarity guarantees that all environmental elements remain fixed throughout each 30-step run, enabling agents to build and exploit spatial knowledge without concern for dynamic changes. The consistent rule application across all difficulty levels ensures that electromagnetic behavior, wall mechanics, and reward criteria remain identical between training and evaluation phases, supporting robust learning transfer while only varying the random seeds that determine wall layouts and node positions.